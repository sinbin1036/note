# 4장 제어 유닛(CU)
이따가 한데


# 5장 기억장치

기억장치 엑세스 : CPU가 어떤 정보를 기억장치에 쓰거나 기억장치로부터 읽는 동작

 기억장치의 엑세스 유형
	순차적 엑세스 (sequential access)
		저장된 정보를 처음부터 순서대로 액세스 하는 방식
	직접 엑세스 (direct access)
		엑세스할 위치 근처로 직접 이동한 다음에,  순차적 검색을 통하여 
		최종 위치에 도달하는 방식
			HDD `하드가 느린이유 : RPM: 회전수 떄문에 느리다 // `
	임의 엑세스 (random access)
		주소의 의해 직접 기억 장소를 찾아 엑세스 하여, 어떤 기억 장소든
		엑세스 하는 시간이 동일
	연관 엑세스 (associative access)
		저장된 내용의 특정 비트들을 비교하여, 일치하는 내용을 엑세스

기억장치 시스템을 설계하는데 있어 고려해야 할 주요 특성들
	용량
	엑세스 속도

전송 단위
	개념
		CPU가 한번의 기억장치 엑세스에 의해 읽거나 쓸 수있는 비트 수
	주기억장치 : 단어 단위
	보조저장 장치 : 블록(512바이트 1k바이트) 단위

주소지정 단위
	바이트 단위 혹은 단어 단위

엑세스 속도와 관련된 파라미터들
	엑세스 시간 : 
		주소와 쓰기/읽기 신호가 도착한 순간부터 데이터 엑세스가 완료되는 순간 시간
	데이터 전송률 : 
		기억장치로 부터 초당 엑세스 되는 비트 수 
		`(1/ 엑세스 시간) * (한번에 읽혀지는 데이터 비트 수)`

기억장치의 유형
	제조 재료에 따른 유형
		반도체 기억장치
		자기표면 기억장치( 자성을 띈다)
	데이터를 저장하는 성질에 따른 유형
		휘발성 기억장치
		비 휘발성 기억장치

삭제 불가능 기억장치
	내용 변경이 불가능한 기억장치
		`예 : ROM`


-----------------------지각 ㅅㅂ-------------------

### 계층적 기억장치

2-단계 계층적 기억장치
	원리 : 원하는 데이터가 첫번째 계층 기억장치에 있다면 즉시 엑세스  하고, 없다면 두번째 계층 기억장치 엑세스

데이터는 밀리세크 속도로 가져온다
메인메모리와 하드는 거의 10만배 차이남..

 ==지역성이 있기때문에  평균기억장치 엑세스 속도가 빨라진다==
	지역성으로 갖는 이유는 가성비 때문이다 (이거 내가 공부한건데..?)

하위계층으로 내려갈수록
	용량이 커지고
	비트당 가격이 떨어지고
	지역성의 원리로 엑세스 빈도는 더 낮아진다

### 반도체 기억장치
### RAM
특성
	임의 엑세스 방식
	반도체 집적회로 기억장치
	데이터 읽기와 쓰기가 모두 가능
	휘발성
5-3그림을 보면 CS(칩 선택 신호)랑 AD(주소 버스)는 같이 온다 (CS먹으러 오는 원딜?)
1K = 주소버스 갯수가 10개,   8 = 한번에 받는 데이터가 8비트인것 (데이터 버스가 8개?)
.
.
DRAM (Dynamic RAM)
	- 캐패시티에 전하를 충전하는 방싣으로 데이터 저장하는 기억 소자들로 구성되어 ==집적 밀도가 높다==
	- 데이터의 저장 상태를 유지하기 위해 주기억인 ==재충전 필요== (왜?)
	- 집적 밀도가 더 높으며, 같은 용량의 SRAM보다 비트당 가격이 저렴함
	- 용량이 큰 기억장치로 사용
.
SRAM (Static RAM)
	- 기억 소지로소 ==플립-플롭==을 이용한다 ->==직접 밀도가 낮다==
	- 전력이 공급되는 동안에는 ==재충전 없어도== 데이터 계속 유지 가능
	- SRAM이 DRAM보다 속도가 빠르다
		->DRAM은 계속 재충전해야 하기 때문에 속도가 내려가기 때문
	- 캐시 메모리 사용
.
.
8 x 8 비트조직
.
16 x 4비트 조직
	주소비트 수 = 4, 데이터 입출력 선의 수 = 4
.
64x1비트 조직
. 이건 따로 공부하자... 못들었다
.
.
용량에 따른 주소 비트 수 예
	8Kbit RAM
		8K x 1비트 조작인 경우, 주소 = 13비트 필요
	1Mbit RAM
		sd
	1Gbit RAM
		 sa
.
RAM 내부 조직의 예 : 16M x 4 조직
	기억 소지들이 4096 x 4096 x 4비트 형태로 배열
	.
	기억 장소의 수 = 16M
	.
주소 버스 수는 12개 있으면됨..? 왓?

내가 따로 공부해야할것 RAS랑 CAS가 무엇인지 5-7그림 이해하기 
비트 조직 이해하기... 뻐킹

#### ROM (Read only Memory)
특징
	==영구 저장이 가능==한 반도체 기억장치
	읽는 것만 가능하고 ==쓰는것은 불가능==
.
사용되는 예
	시스템 초기화 및 진단 프로그램
	빈번히 사용되는 함수들을 위한 서브루틴
	제어 유니트의 마이크로프로그램
.
종류
	PROM
		사용자가 한번은 쓰는것이 가능한 ROM
	EPROM
		자외선을 이용하여 내용을 지우는것이 가능한 PROM, 여러번 쓰기가 가능
	EEPROM
		전기적으로 지울 수 있는 EPROM, 데이터 갱신 횟수 제한(수만번 정도)
	플래시 메모리
		NAND형 : 페이지(2KB/4KB) 단위 R/W 가능, 블록(64/128 페이지) 단위 삭제
			`NOR형은 바이트 단위로 R/W 가능`
		EEPROM에 비하여 삭제 시간이 더 빠르고, 집적 밀도도 높음
		HDD를 대체하는 SSD의 구성요소  `그럼 SSD는 ROM의 종류인가?(애매함), ROM은 내부 저장장치인가 외부저장장치인가?(외부임)`

RAM vs ROM
RAM은 휘발성 ROM은 비 휘발성
RAM은 R/W가능하지만 ROM은 R만 가능


기억장치 모듈의 설계 (HOLY...)
정의
	기억장치 칩의 데이터 I/O 비트 수가 단어 길이보다 적은 경우
		-> 여러개의 칩들을 ==병렬로 접속하여== 기억장치 모듈을 구성
	`단어 길이 = N비트, 기억장치 칩의 데이터 I/O비트 수 = B일경우`
	`N/B개의 칩들을 병렬 접속`
	.
	필요한 기억 장소의 수가 기억 장치의 칩의 기억장소 수보다 더 많은 경우
	->==직렬접속==을 하여 기억장치 모듈을 구성한다
	`병령접속하는 경우와 직렬 접속하는 경우 비교하여 이해하기`
	.
	데이터 길이가 같으면 직렬임
	
### 캐시메모리
.
	 정의
	 CPU와 주기억장치의 ==속도 차이==로 인한 CPU 대기 시간을 초기화 시키기 위해 
		  ==CPU와 주기억장치 사이에== 설치하는 고속 반도체 기억장치
			  `주기억장치와 CPU사이 속도 조절하고 연결하기 위한 장`
	.
	특징
		주기억장치보다 액세스 속도가 더 높은 칩 사용
		가격 및 제한된 공간 때문에 용량이 적다
	.
	캐시 적중(hit) : CPU가 원하는 데이터가 캐시에 있는 상태
	캐시 미스(miss) : 캐시에 없는 상태, 주기억장치로부터 데이터를 읽어온다
	`예제 5-1 별표`
	.
	지역성 (매모리는 지역성을 따짐)
		시간적 지역성
			최근에 액세스된 프로그램이나 데이터가 가까운 미래에
			 다시 액세스 될 가능성이 높다`
		공간적 지역성
			기억장치내에 인접하여 저장되어 있는 데이터들이 연속적으로 액세스 될
			가능성이 높다
		순차적 지역성
			분기가 발생하지 않는 한, 명령어들은 기억장치에 저장된 순서대로
			인출되어 실행된다
	캐시 설계 있어서 공통적인 목표
		캐시 적중률 극대화
		캐시 엑세스 시간의 최소화
		`더 있음`
	.
	캐시의 크기 (용량)
		용량이 커질수록 적중률이 높아지지만,비용이 증가
		용량이 커질수록 주소 해독 및 정보 인출을 위한 주변 회로가 더 복잡해지기 때문에 
		엑세스 시간이 다소 더 길어진다
	.
	인출 방식
		요구 인출
			필요한 정보만 인출해 오는 방식
		선인출 방식
			필요한 정보 외에 앞으로 필요한 정보를 미리 가져오는 방식
			지역성이 높은 경우 효과가 크다
	.
	주기억장치와 캐시의 조직
		블록
			메모리를 여러작은 단위로 나눈것으로 주기억장치와 캐시간에 데이터를주고 받는 기본 단위
		라인
		태그

사상방식
	각 주기억장치 블록이 어느 캐시라인에 적재될 것인지를 결정해 주는 방식으로서,  캐시 내부 조직을 결정하는 것
	**종류**
		 ==직접 사상==
			각 주기억장치 불록이 지정된 하나의 캐시라인으로만 적재됨
			형식 
			![[Pasted image 20241104110658.png]]
				태그 필드 : 태그번호 (라인에 적재되어 있는 번호)
				라인 번호 :  나누기? 이건 직접주소 느낌인가? 주소 느낌인거 같은데데
				단어 필드 :  워드 수 8개면 $2^3$  즉 3비트이다
		장점
			하드웨어가 간단해지고, 구현 비용이 적게 든다
		단점
			각 주기억장치 블록이 적재될수 있는 캐시라인이 한개뿐이기 때문에,
			그 라인을 공유하는 다른 블록이 적재되는 경우엔 overwrite되거나 swap-out됨
		==완전-연결 사상==
			주기억장치 블록이 캐시의 어떤 라인으로든 적재 가능
			태그 필드 = 주기억장치 블록 번호
			형식
				![[Pasted image 20241104113926.png]]
			장점
				새로운 블록이 캐시로 적재될 때 라인의 선택이 자유롭고,
				지역성이 높다면, 적중률이 매우 높아진다
			단점
				캐시 라인들의 트그들을 병렬로 검사해서 
				==가격높은 연관 기억장치== 및 ==복잡한 주변 회로==가 필요함
					`걍 뒤지게 복잡해지는게 단점임`
			직접과 완전-연결은 너무 서로 극단적이다
		==세트-연관 사상==
			직접 사상과 완전-연관 사상의 조합
			==예제 문제 꼭 풀기==
		.
	교체 알고리즘
		개념
			세트 연관사상에서 주기억장치로부터 새로운 블록이 캐시로 적재될시, 
			만약 세트가 다 차있을 경우, 그중하나를 선택하여 교체하는 것
		종류
			==최소 최근 사용(LRU) 알고리즘==
				사용되지 않은 채로 가장 오래 있었던 블록을 교체하는 방식
			==FIFO 알고리즘==
				캐시에 적재된지 가장 오래된 블록을 교체하는 방식
			==최소 사용 빈도(LFU) 알고리즘==
				참조되었던 횟수가 가장 적은 블록을 교체하는 방식
			`예제5-6을 LRU만 아닌 다른 방법으로도 할줄 알아야함`
쓰기 정책
	캐시의 블록이 변경되었을 때 ,그 내용을 주기억장치에 갱신하는 시기와 방법 결정
	.
	종류
		write-through
			개념
				모든 쓰기 동작들이 ==캐시와 주기억장치에 동시에 수행==되는 방식
			장점
				캐시에 적재된 블록 내용과 주기억장치에 있는 그 ==블록 내용이 항상 같다==
			단점
					모든 쓰기 동작이 캐시, 주기억장치 동시에 이루어져, 
					==쓰기 시간이 길어진다==
		write-back
			개념
				캐시가 데이터가 변경되어도 ==주기억장치는 갱신되지 않는== 방식
			장점
				기억장치 쓰기 동작이 최소화되어, ==쓰기 시간이 짧아진다==
			단점
				캐시내용과 주기억장치의 해당==내용이 항상다르다==
	다중 캐시
		on-chip cache
			캐시 엑세스  시간을단축 시키기 위하여  CPU 칩 내에 포함시킨 캐시
		계층적 캐시
			`에제 5-8 풀기`
	분리캐시 (셤 범위 아님)

DDR SDRAM
	환경
		기억장치의 엑세스 속도는 CPU에 비하여 현저히 낮음
		동영상 처리, 음성/영상 압축과 같은 대규모 데이터 처리 응용 증가
			-> ==주기억장치 병목현상 심화==
		==기억장치 엑세스 및 데이터 전송률 향상 기술 개발==
	종류
		S(동기식) DRAM(Synchronous DRAM : SDRAM)
			개념
				엑세스 동작들이 시스템 클록에 맞추어 수행되는 DRAM
			예 (읽기 동작)
				 CPU는 한 클록 주기 동안에 시스템 버스를 통하여 주소와 읽기 신호 를 기억장치로 보낸 후, ==그 결과를 기다리지 않고 내부적으로 다른 연산을 수행==
					*비동기 작업이랑 유사함*
			SDRAM 내부조직
				버스트 모드 
					1부터 5까지 하나하나 받는게 아닌 1부터 5까지 한번에 받는것
				.
			버스트 읽기 동작의 타이밍 도 (이건 시험문제 안낸다네)
				![[Pasted image 20241112112301.png]]
		DDR SDRAM
			개념
				SDRAM 기억장치 모듈의 대열폭을 향상키기기 위한 기술
					`대열폭: 단위 시간당 전송되는 데이터 량, 단위`
				DDR SDRAM
					버스 클록 당 두번의 데이터 전송
						`클록 상승, 하강에서 각각 전송`
				DDR2 SDRAM 
					DDR SDRAM과 같으며, 버스 클록 주파수를 두배로 높여 대열폭 향상
			`읽기 시간 비교 시험문제 안낸다네`
			![[Pasted image 20241112113208.png]]
		cas 지연 `이것도 셤 안나옴`

기억장치 랭크 (용어만 알자)
	개념
		데이터 입출력 폭이 62비트가 되도록 구성한 기억장치 모듈
			`다수의 기억장치 칩들로 구성`
	종류
		단면 모듈 (SIMM) `예전꺼`
			기판 한면에만 칩들을 장착하는 것
			32비트 버스가 한번에 버스를 통하여 직렬 전송되도록 구성한 모듈
		양면 모듈 (DIMM) `현재 사용`
			기판 양면에다가 칩들을 장착하는 것
			x8 조직의 SDRAM들이 각면에 8개씩 병렬 접속하여 구성한 모듈

차세대 비휘발성 기억장치

# 6장 보조 저장장치

하드디스크
	자기디스크라고 불림
	.
	주요 구성 요소들
		원형 평판
		헤드
		디스크 팔
		트랙
	.
	디스크 쓰기
		 헤드의 코일에 전류가 흐를때 발생하는 자기장을 이용하여 데이터를 읽음
		.
	디스크 읽기
		자기장이 존재하는 위치에 헤드가 지나갈때 전기를 감지하여 데이터를 인출함
	.
	디스크의 구조
	![[Pasted image 20241118102806.png]]
	.
	CAV 방식(이 부분은 이해)
		개념
			등각속도 즉, 일정한 속도로 회전하는 상태에서도 데이터를 동일한 비율로 
			엑세스 할수 있는 방식
		장단점
			구동방식이 간단하지만 안쪽과 바깥쪽 데이터 비트수가 같아야 해
			바깥쪽 저장 밀도를 낮춰야해서 저장공간 낭비가 됨
	MZR 방식
		개념
			다중영역 방식으로 디스크 전체적으로 저장밀도를 거의 같도록 조정한다
		장단점
			더많은 데이터를 저장 할수 있지만 구동방식이 복잡함
.
	디스크 형식화 작업(포멧)
		CRC
			오류 검출을 위한 코드
		`외우진 말고 이런게 있다고만 알자	`
	.
	디스크 드라이브 (용어만만)
		디스크 평판, 디스크 팔, 회전 구동장치 및 데이터 전송회로를 포함한 패키지
		.
		양면 디스크
		단면 디스크
	.
	==디스크 액세스 시간== (예제 문제 빡시게 풀기)
		개념
			디스크 액세스(r/w) 동작의 순서
				1. 헤드를 해당 트랙으로 이동
				2.  원하는 섹터가 헤드 아래로 회전되어 올 때까지 대기
				3.  데이터 전송
			.
		디스크 액세스 시간
			티스크 액세스 시간 = 탐색시간 + 회전 지연 시간 + 데이터 전송 시간
				탐색시간 (seek time)
				회전 지연 시간(rotation lantency time)
				데이터 전송 시간(data transfer time)
		회전지연시간
			디스크의 회전속도에 따라 결정
		.
			예제 6-1
				(0.5KByte / 600MByte/s)는 계산할필욘 없음 시험에 나오면 수식만 넣자
RAID
	출현 배경
		한개의 큰 대형 디스크를 사용한것보다 크기가 작은 여러개의 디스크들을 서로 연결하여 하나의 큰 용량을 가진 ==디스크 배열==을 구성하면 보다 더 저렴하게
		용량을 늘릴수 있다
		.
		디스크 배열을 이해하면 이 챕터 이해한거임
	.
	추가적인 장점
		데이터 분산 저장에 의한 동시 액세스 가능
		병렬 데이터 채널에 의한 데이터 전송 속도 향상
	.
	디스크 인터리빙
		데이터 블록들을 여러개의 디시크들로 이루어진 디스크 배열에 분산 저장하는 기술
		균등 분산 저장을 위하여 라운드-로빈 방식 사용
	.
	레이드 제안
		디스크 배열의 결함허용도를 높이기 위해 RAID가 제안됨
	MTTF
	.
	RAID 종류
		RAID-1
			디스크 미러링(disk mirroring)방식
				데이터 디스크에 저장된 모든 데이터들은 짝을 이루고 이는 미러 디스크의 같은 위치에 복사  (ctrl c ,v이건가 걍?) 
				`에러날 확률이 모르는 두 사람이 병원을 1년마다 한번씩 가는데 서로 병원가는 날이 겹치는 확률?`
			장점
				거의 완전한 결함허용도 제공
			단점
				오버헤드 100%
				가격이 높다
		.
		RAID-2
			비트-단위 인터리빙 방식 사용 : 데이터를 각 디스크에 비트 단위로 분산 저장
			해밍코드를 이용하여 오버헤드를 줄여주는 기술
			.
		RAID-3
			패러티 방식
				오류 검출 및 위치를 검출한다
			장점
				병렬 데이터 읽기/쓰기 가능 -> 디스크 액세스 속도 향상
			단점
				쓰기 동작 때마다 패리티 갱신 필요 -> 시간 지연 발생
		RAID-4
			블록-단위 인터리빙 방식 사용
				3번의 디스크 읽기와 2번의 디스크 쓰기 동작 필요 -> 성능저하
			디스크 액세스 횟수의 최소화
				`디스크 수에 상관없이, 한 블럭 갱신에 네 번의 디스크 액세스만 필요`
		RAID-5
			RAID-4의 문제점을 보완하기 위하여 패리티 블록들을 
			라운드-로빈 방식으로 분산 저장(디스크 단위가 아닌 블록단위로 관리)
			장점
				패리티 디스크에 대한 병목 현상 해소
				쓰기 동작들의 병렬수행 가능
		.
		RAID-3,4,5 모두 패리티 비트(같은 방식)를 사용 -> 5번이 제일 최적화됨
			RAID-1,2,5 중에 골라서 쓰는데 1,5번만 거의 쓴다
		3번이랑 5번의 특성이 좀 다름
			3번은 병렬처리가 잘됨
		.
		문제점
			작은 쓰기 문제
				==블록단위로 관리==하는데 너무 조금만 쓰면 블록을 통채로 사용되기 때문에
				성능이 저하된다
		RAID 1,5 비교
			1 읽기고 쓰기 많은 환경에 적합
			5 용량과 비용을 중요시하는 응용이나 큰 쓰기 요구가 많은 환경에 저합
			가격대는 5가 좋다
	.
플래시 메모리와 SSD
	초반 단어만 알고 뒤에 회로구성은 셤범위 X  p.350까지?
# 7장 시스템 버스
